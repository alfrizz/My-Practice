services:
  jupyter:
    container_name: gpu-jl

    build:
      context: ${HOME}/my_practice/scripts
      dockerfile: Dockerfile
    image: gpu-jl:latest

    restart: unless-stopped

    gpus: all
    cpus: "16.0"
    mem_limit: "28g"
    shm_size: 24g     
    ports:
      - "8888:8888"

    volumes:        
      - "/home/alfrizz/docker_tmp:/tmp"
      - ${HOME}/my_practice:/workspace
      - ${HOME}/my_practice/scripts/entrypoint.sh:/usr/local/bin/entrypoint.sh:ro

    working_dir: /workspace

    entrypoint: ["/usr/local/bin/entrypoint.sh"]

    command:
      - jupyter
      - lab
      - --no-browser
      - --ip=0.0.0.0
      - --allow-root
      - --NotebookApp.token=



#### after changes ####
# docker-compose down
# docker-compose up -d
# docker-compose logs -f jupyter
